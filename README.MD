# Discord Bot с двумя типами розыгрышей

## 1 к 1
После публикации розыгрыша: пользователю необходимо 1 раз отправить символ + в чат с розыгрышем и бот его регистрирует присваивая номер участника

## 1 ко многим
После публикации розыгрыша: пользователь может отправлять символ + в чат много раз (минимум через 1) и на каждый + будет присвоeн порядковый номер. 
Больше плюсов - Выше шанс

# Подготовка и установка
## Подготовка на стороне Discord

1. Создание тестового сервера
2. Включение режима разработчика
3. Создание приложения и получение токена
4. Добавление бота на сервер

Эти пункты достаточно подробно описаны в статье на хабре https://habr.com/ru/articles/676390/

## Node JS
Скачать и установить Node JS
https://nodejs.org/ru/download

## BOT
Скачиваем архив бота с текущего репозитория.
После скачивания распаковываем архив.

# Настройка и запуск
1. Открываем папку, в которую распаковали бота
2. файл "config.json.example" переименовать в "config.json"
3. Открыть файл "config.json" и заполнить
3.1. В поле "TOKEN" вносим ключ токена бота из пункта "3. Создание приложения и получение токена"
3.2. В поле "GUILDS" вносим цифры "ID" вашего дискорд сервера
3.3. В поле "CLIENTID" вносим цифры "ID" вашего бота дискорд. 
> Проще всего узнать цифры "ID" включив режим разработчика (2. Включение режима разработчика), 
> нажав правой кнопкой мыши по названию сервера(GUILDS) или по нику бота(CLIENTID) и выбрать
> пункт меню "Копировать ID..."
Сохраняем файл настроек.

Открываем консоль (можно обычную коммандную строку или POWER SHELL. Я использую терминал в visual studio code).
Переходим, в консоли, в папку с ботом.
Вводим команду "npm install" и дожидаемся окончания установки библиотек

После завершения установки всех библиотек регистрируем команды на сервере. Для этого:

node .\deploy-commands.js

Теперь запускаем бота командой:

node .

# Доступные Слэш команды (Только АДМИНИСТРАТОРАМ)
## Команды управления розыгрышем
- /список_розыгрышей status:[Выбрать_Статус] - Выведет список розыгрышей с выбранным статусом.
- /создать_розыгрыш type:[Выбрать_тип_из_списка] channel:[Выбрать_ТЕКСТОВЫЙ_канал_из_списка] head:[Заголовок/Название_Розыгрыша] body:[Описание_розыгрыша] - Создает новый розыгрыш.
- - type - 2 типа рощыгрышей. 1 к 1 (каждому участвующему присваивается персональный номер) и 1 ко многим (участник может иметь несколько "закрепленных" номеров. Но не подряд)
- - channel - ТЕКСТВОЫЙ канал в котормо будет вывешен Анонс, проводится участие и вывод результатов.
- - head - Загловок "розыгрыша"
- - body - краткое описание розыгрыша
!!! Так как "body" не позволяет использовать перенос строк то все правила участия, крупный текст и прочее рекомендую вывешивать руками после публикации.

- /предпросмотр_розыгрыша id:[ID] - Выведет, в текущем канале, то как будет выглядить сообщение о розырыше.
- /публикация_розыгрыша id:[ID] - Запустит розыгрыш с ID
- /подведение_итогов_розыгрыша id:[ID] - Закрывает "регистрацию на участие" в розыгрыше и позволяет воспользоваться командами подведения итогов
- /закрыть_розыгрыш id:[ID] - Окончательно закрывает розыгрыш.

## Команды подведения итогов
!!! Подведение итогов возможно только на стадии "подведения итогов".

- /вывести_участника_с_номером number:[] - Выведет участника с указанным номером
- /вывести_случайного_участника - Выведет случайного участника розыгрыша